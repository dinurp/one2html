{% extends "layout.html" %}

{% block title %}{{ name }}{% endblock %}

{% block content %}
<nav>
    <ul>
        {% for section in sections %}
        <li {% match section.color -%}
                {%- when Some with (color) -%}
                    style="border-left-color: rgba({{ color.color.red }}, {{ color.color.green }}, {{ color.color.blue }}, {{ color.alpha }})"
                {%- when None -%}
            {%- endmatch -%}
        >
            <a href="{{ section.path }}.html" target="section" title="{{ section.name }}">{{ section.name }}</a>
        </li>
        {% endfor %}
    </ul>
</nav>
<iframe frameborder="0" name="section" class="content"></iframe>

<style>
    nav li {
        padding-left: 10px;
        border-left: 10px solid transparent;
    }
</style>
<script>
    document.addEventListener('click', function (event) {
        // If the clicked element doesn't have the right selector, bail
        if (!event.target.matches('nav a')) return;
        for (const child of event.target.parentElement.parentElement.children) {
            child.classList.remove('active');
        }
        event.target.parentElement.classList.add('active');

    }, false);

    window.addEventListener('message', (event) => {
        const activeTarget = event.data;

        for (const link of document.querySelectorAll('nav ul li a')) {
            if (link.href === activeTarget) {
                link.parentElement.classList.add('active');
            }
        }
    });
</script>
{% endblock %}